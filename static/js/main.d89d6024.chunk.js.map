{"version":3,"sources":["images/Vector.svg","components/Header.js","images/Vector1.svg","images/cross.svg","images/delete2.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/ImagePopup.js","utils/api.js","utils/auth.js","components/Register.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","images/succes.svg","images/error.svg","components/InfoTooltip.js","components/Login.js","images/spinner1.png","components/Spinner.js","components/ProtectedRoute.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","linkText","linkPath","path","useRouteMatch","useHistory","className","src","logo","alt","isLoggedIn","email","onClick","onLogOut","type","to","UserContext","React","createContext","Card","currentUser","useContext","card","data","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","likeOwner","likeButtonClassName","handleCardClick","link","name","onLikeClick","length","onDeleteClick","trash2","Main","loggedIn","onEditAvatar","avatar","onEditProfile","vector","about","onAddPlace","cross","cards","map","onCardDelete","onCardLike","Footer","PopupWithForm","isOpen","onClose","title","onSubmit","children","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","onChange","target","value","id","minLength","maxLength","required","ImagePopup","selectedCard","api","baseUrl","headers","this","_url","_headers","res","ok","json","Promise","reject","status","fetch","then","_checkResponse","method","body","JSON","stringify","authorization","signApi","password","token","Register","setEmail","setPassword","onSignUp","placeholder","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","place","setLink","onAddCard","InfoTooltip","isSuccesed","succes","error","Login","onSignIn","Spinner","spinner","ProtectedRoute","Component","component","App","isEditProfilePopupOpen","setEditProfile","isAddPlacePopupOpen","setAddPlacePopup","isEditAvatarPopupOpen","setAvatarPopup","isImagePopupOpen","setImagePopup","setSelectedCard","setUser","initialCards","setCards","setLogIn","isRegistrationPopupOpen","setRegistrationPopup","signSuccsess","setSignSucces","isLoading","setIsLoading","history","handleLogOut","push","localStorage","removeItem","closeAllPopups","jwt","getItem","getUserData","catch","err","console","log","getInitialCards","tokenCheck","closeByEscape","key","document","addEventListener","removeEventListener","Provider","exact","deleteCard","state","filter","c","like","toggleLike","newCard","signUp","finally","signIn","setItem","sendUserData","sendUserAvatar","sendCardInfo","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d89d6024.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Vector.bbe2a6ea.svg\";","import logo from '../images/Vector.svg'\r\nimport React from 'react'\r\nimport { Link, useHistory, useRouteMatch } from 'react-router-dom';\r\n\r\nfunction Header (props){\r\n\r\n    let linkText; //Если использовать useState, бесконечный перерендер\r\n    let linkPath;\r\n\r\n    const {path} = useRouteMatch()\r\n\r\n    \r\n    const history = useHistory();\r\n\r\n    if(path === '/sign-in'){\r\n        linkText = 'Регистрация'\r\n        linkPath = '/sign-up'\r\n    }else{\r\n        if(path === '/sign-up'){\r\n            linkText = 'Вход'\r\n            linkPath = '/sign-in'  \r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"header\">\r\n            <img className=\"header__logo\" src={logo} alt=\"Лого\"/>\r\n            {props.isLoggedIn ? (\r\n                <div className='header__info'>\r\n                    <div className=\"header__email\">{props.email}</div>\r\n                    <button className = \"header__button link\" onClick={props.onLogOut} type = \"submit\">Выйти</button>\r\n                </div>\r\n                ): <Link to={linkPath} className = \"header__button link\">{linkText}</Link>}\r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header\r\n","export default __webpack_public_path__ + \"static/media/Vector1.6c7bf054.svg\";","export default __webpack_public_path__ + \"static/media/cross.bed8c136.svg\";","export default __webpack_public_path__ + \"static/media/delete2.a85cc5e2.svg\";","import React from 'react';\r\n\r\nexport const UserContext = React.createContext();\r\n","import trash2 from '../images/delete2.svg'\r\nimport React from 'react';\r\nimport { UserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card (props){\r\n\r\n    const currentUser = React.useContext(UserContext);\r\n\r\n    const card = props.data;\r\n\r\n    const isOwn = card.owner._id === currentUser._id;\r\n\r\n    const cardDeleteButtonClassName = `${isOwn ? 'elements__delete-button link' : 'elements__delete-button_disabled'}`;\r\n\r\n    const isLiked = card.likes.some(likeOwner => likeOwner._id === currentUser._id)//так она же может тут меняться...\r\n\r\n    const likeButtonClassName = `link ${isLiked ? 'elements__like-button_active ' : 'elements__like-button'}`;\r\n\r\n    function handleClick() {\r\n      props.handleCardClick(card);\r\n    }  \r\n\r\n    \r\n    return(\r\n        <div className=\"elements__item\">\r\n          <button className=\"elements__popup-button\" type=\"button\" onClick={handleClick}>\r\n            <img className=\"elements__photo link\" src={card.link} alt={card.name}/>\r\n          </button>\r\n          <div className=\"elements__description-content\">\r\n          <h2 className=\"elements__title\">{card.name}</h2>\r\n          <div className='elements__like'>\r\n            <button className={likeButtonClassName} type=\"button\" onClick={()=>{props.onLikeClick(card)}}></button>\r\n            <div className='elements__like-quantity'>{card.likes.length}</div>\r\n            </div>\r\n          </div>\r\n          <button className={cardDeleteButtonClassName} onClick={()=>{props.onDeleteClick(card)}} type=\"button\">\r\n            <img className=\"elements__trash-img\" src={trash2} alt=\"удалить\"/>\r\n          </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Card;","import vector from '../images/Vector1.svg';\r\nimport cross from '../images/cross.svg';\r\nimport React from 'react';\r\nimport Card from './Card';\r\nimport { UserContext } from '../contexts/CurrentUserContext';\r\nimport Header from './Header';\r\n\r\nfunction Main (props){\r\n\r\n  const currentUser = React.useContext(UserContext);\r\n  \r\n  return(\r\n    <div className=\"main\">\r\n      <Header isLoggedIn={props.loggedIn} email={props.email} onLogOut={props.onLogOut}/>\r\n      <section className=\"profile\">\r\n        <div className=\"profile__info\">\r\n          <button className='profile__avatar-button' onClick={props.onEditAvatar} type='button'>\r\n              <img className=\"profile__img\" src={currentUser.avatar} alt=\"Фото профиля\" />\r\n              <div className='profile__avatar-icon'>\r\n              </div>\r\n          </button>\r\n          <div className=\"profile__title\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button className=\"profile__edit-button\" onClick={props.onEditProfile} type=\"button\"><img className=\"profile__edit-img\" src={vector} alt=\"Редактировать профиль\" /></button>\r\n            <p className=\"profile__profession\">{currentUser.about}</p>\r\n          </div>\r\n        </div>\r\n        <button className=\"profile__add-button\" onClick={props.onAddPlace} type=\"button\">\r\n          <img className=\"profile__cross\" src={cross} alt=\"Добавить изображение\" />\r\n        </button>\r\n        </section>\r\n        <section className=\"elements\">\r\n          {props.cards? props.cards.map((card) => (\r\n            <Card key={card._id} data={card} handleCardClick={props.handleCardClick} onDeleteClick={props.onCardDelete} onLikeClick={props.onCardLike}/>\r\n          ))\r\n          :'Загрузка карточек'}\r\n        </section>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Main","function Footer (props){\r\n    return(\r\n        <div className=\"footer\">\r\n            <p className=\"footer__text\">&copy;2021 Егор Жеглов</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Footer","\r\n\r\nfunction PopupWithForm (props){\r\n    return(\r\n        <div className={`popup ${props.isOpen ? 'popup_is-opened' : ' '}`}>\r\n          <div className=\"popup__container\">\r\n              <button className=\"popup__close popup__close_edit\" onClick={props.onClose} type=\"button\"></button>\r\n                <h2 className=\"popup__title\">{props.title}</h2>\r\n                <form className = \"popup__form popup__form_edit\" name = {`${props.name}Form`} onSubmit = {props.onSubmit}>\r\n                    {props.children}\r\n                    <button className = \"popup__save-button\" type = \"submit\">Сохранить</button>\r\n                </form>\r\n      </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default PopupWithForm","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { UserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props){\r\n\r\n    const currentUser = React.useContext(UserContext);\r\n\r\n    const [name, setName] =React.useState('')\r\n    const [description, setDescription] =React.useState('')\r\n\r\n    function handleChangeName(e) {\r\n      setName(e.target.value);\r\n    }\r\n\r\n    function handleChangeDescription(e) {\r\n      setDescription(e.target.value);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n      }, [currentUser, props.isOpen]);  \r\n\r\n    function handleSubmit(e) {\r\n        // Запрещаем браузеру переходить по адресу формы\r\n        e.preventDefault();\r\n        props.onUpdateUser(name, description);\r\n    }\r\n\r\n    return(\r\n      <PopupWithForm name=\"edit\" title=\"Редактировать профиль\" onClose={props.onClose} isOpen={props.isOpen} onSubmit={handleSubmit}>\r\n        <input className = \"popup__input\" type = \"text\" onChange={handleChangeName} value={name} name=\"nameInput\" id=\"name_input\" minLength=\"2\" maxLength=\"40\" required />\r\n        <span className = \"popup__input-error\" id=\"name_input-error\"></span>\r\n        <input className = \"popup__input\" type = \"text\" name=\"professionInput\" onChange={handleChangeDescription} value={description} id=\"profession_input\" minLength=\"2\" maxLength=\"200\" required />\r\n        <span className = \"popup__input-error\" id=\"profession_input-error\"></span>\r\n      </PopupWithForm>)\r\n}\r\n\r\nexport default EditProfilePopup;","\r\n\r\nfunction ImagePopup (props){\r\n  \r\n  let card;\r\n  if(props.selectedCard){\r\n    card = props.selectedCard;\r\n  } else {\r\n    card = {};\r\n  }\r\n  \r\n    return(\r\n      <div className= {`popup popup_type_photo ${props.isOpen ? 'popup_is-opened' : ' '}`} onClick={props.onClose}>\r\n          <div className=\"popup__photo-container\">\r\n          <button className=\"popup__close popup__close_photo\" onClick={props.onClose} type=\"button\"></button>\r\n          <img className=\"popup__photo\" src={`${card.link}`} alt={card.name} />\r\n          <h3 className=\"popup__photo-title\">{card.name}</h3>\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default ImagePopup","class Api {\r\n    constructor({baseUrl, headers}) {\r\n      this._url = baseUrl;\r\n      this._headers = headers;\r\n    }\r\n\r\n    _checkResponse(res) {\r\n      //проверка ответа на запрос\r\n        if (res.ok) {\r\n          return res.json()\r\n        }\r\n        return Promise.reject(res.status)\r\n      }\r\n\r\n\r\n    getUserData(){\r\n      //Получаем информацию пользователе с сервера.\r\n        return fetch(`${this._url}/users/me`,{\r\n          headers: this._headers\r\n        })\r\n        .then(this._checkResponse)\r\n    }\r\n\r\n\r\n    getInitialCards(){\r\n      //получаем карточки, загруженные на сервер\r\n      return fetch(`${this._url}/cards`,{\r\n        headers: this._headers\r\n      })\r\n      .then(this._checkResponse)\r\n    }\r\n\r\n\r\n    toggleLike(id, method){\r\n      //Сообщаем серверу, что лайк поставлен\r\n      return fetch(`${this._url}/cards/likes/${id}`, {\r\n        method: `${method}`,\r\n        headers: this._headers,\r\n      })\r\n      .then(this._checkResponse)\r\n    }\r\n\r\n\r\n    sendCardInfo(name, link){\r\n      //ОТправляем данные карточки\r\n      return fetch(`${this._url}/cards`, {\r\n        method: 'POST',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: `${name}`,\r\n          link: `${link}`\r\n        })\r\n      })\r\n      .then(this._checkResponse) \r\n    }\r\n\r\n    deleteCard(id){\r\n      //Сообщаем серверу, что лайк поставлен\r\n      return fetch(`${this._url}/cards/${id}`, {\r\n        method: `DELETE`,\r\n        headers: this._headers,\r\n      })\r\n      .then(this._checkResponse)\r\n    }\r\n\r\n    sendUserData(name, about){\r\n      //Отправляем измененные данные на сервер.\r\n      return fetch(`${this._url}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: `${name}`,\r\n          about: `${about}`\r\n        })\r\n      })\r\n      .then(this._checkResponse)\r\n    }\r\n\r\n    sendUserAvatar(link){\r\n      //Отправляем измененные данные на сервер.\r\n      return fetch(`${this._url}/users/me/avatar`, {\r\n        method:`PATCH`,\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          avatar: `${link}`,\r\n        })\r\n      })\r\n      .then(this._checkResponse)\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const api = new Api({\r\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-25',\r\n    headers: {\r\n      authorization: '2245779c-6198-47bc-8dae-135ddf28bc0e',\r\n      'Content-Type': 'application/json'\r\n    }\r\n  });\r\n\r\n  export {api};","class SignApi{\r\n    constructor(baseUrl){\r\n      this._url = baseUrl;\r\n    }\r\n\r\n    _checkResponse(res) {\r\n      //проверка ответа на запрос\r\n        if (res.ok) {\r\n          return res.json()\r\n        }\r\n        return Promise.reject(res)\r\n      }\r\n\r\n    signUp(email, password){\r\n       //Регистрируем пользователя пользователя\r\n\r\n      return fetch(`${this._url}/signup`, {\r\n        method: 'POST',\r\n        headers: {'Content-Type': 'application/json'},\r\n        body: JSON.stringify({\r\n          password: `${password}`,\r\n          email: `${email}`\r\n        })\r\n      })\r\n      .then(this._checkResponse)\r\n     }\r\n\r\n    signIn(email, password){\r\n      //Авторизируем пользователя\r\n\r\n     return fetch(`${this._url}/signin`, {\r\n       method: 'POST',\r\n       headers: {'Content-Type': 'application/json'},\r\n       body: JSON.stringify({\r\n         password: `${password}`,\r\n         email: `${email}`\r\n       })\r\n     })\r\n     .then(this._checkResponse)\r\n    }\r\n\r\n    tokenCheck(token){\r\n     return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`,\r\n      }\r\n    })\r\n    .then(this._checkResponse)\r\n    } \r\n  }\r\n\r\n\r\n  const signApi = new SignApi('https://auth.nomoreparties.co');\r\n\r\n  export default signApi","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nfunction Register (props){\r\n\r\n    const [email, setEmail] =React.useState('')\r\n    const [password, setPassword] =React.useState('')\r\n\r\n    function handleChangeEmail(e) {\r\n        setEmail(e.target.value);\r\n      }\r\n  \r\n      function handleChangePassword(e) {\r\n        setPassword(e.target.value);\r\n      }\r\n\r\n    function signUpSubmit(e){\r\n        e.preventDefault()\r\n        props.onSignUp(email, password);\r\n    }\r\n\r\n    return(\r\n        <form className='sign' onSubmit={signUpSubmit}>\r\n            <h1 className = \"sign__title\">Регистрация</h1>\r\n            <input className = \"sign__input\" type = \"email\" value={email} onChange={handleChangeEmail} name=\"emailInput\" id=\"email_input\" placeholder='email' required />\r\n            \r\n            <input className = \"sign__input\" type = \"password\" value={password} onChange={handleChangePassword} name=\"passwordInput\"  placeholder='Пароль' id=\"password_input\" minLength=\"2\" maxLength=\"20\" required />\r\n          \r\n            <button className = \"sign__button link\" type = \"submit\">Зарегистрироваться</button> \r\n            <p>Уже зарегестрированы? <Link to=\"/sign-in\" className = \"sign__link link\">Войти</Link></p>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Register","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props){\r\n\r\n    const avatarRef = React.useRef();  \r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onUpdateAvatar(avatarRef.current.value);\r\n    }\r\n\r\n    return(\r\n      <PopupWithForm name=\"add\" title=\"Добавить Фото\" onClose={props.onClose} isOpen={props.isOpen} onSubmit={handleSubmit}>\r\n        <input className = \"popup__input\" ref={avatarRef} type = \"url\" name=\"avatarLinkInput\" id=\"avatar_input\" placeholder=\"Ссылка на картинку\" minLength=\"2\" maxLength=\"200\" required />\r\n        <span className = \"popup__input-error\" id=\"avatar_input-error\"></span>\r\n      </PopupWithForm>)\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props){\r\n    const [place, setName] =React.useState('')\r\n    const [link, setLink] =React.useState('')\r\n\r\n    function handleChangePlace(e) {\r\n      setName(e.target.value);\r\n    }\r\n\r\n    function handleChangeLink(e) {\r\n      setLink(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        // Запрещаем браузеру переходить по адресу формы\r\n        e.preventDefault();\r\n        props.onAddCard(place, link);\r\n        setName('');\r\n        setLink('');\r\n    }\r\n\r\n    return(\r\n      <PopupWithForm name=\"add\" title=\"Добавить Фото\" onClose={props.onClose} isOpen={props.isOpen} onSubmit={handleSubmit}>\r\n        <input className = \"popup__input\" value={place} onChange={handleChangePlace} type = \"text\" name=\"photoNameInput\" id=\"photo-name_input\" placeholder=\"Название\" minLength=\"2\" maxLength=\"30\"  required />\r\n        <span className = \"popup__input-error\" id=\"photo-name_input-error\"></span>\r\n        <input className = \"popup__input\" value={link} onChange={handleChangeLink} type = \"url\" name=\"photoLinkInput\" placeholder=\"Ссылка на картинку\" id=\"photo-link_input\"  required />\r\n        <span className = \"popup__input-error\" id=\"photo-link_input-error\"></span>\r\n      </PopupWithForm>)\r\n}\r\n\r\nexport default AddPlacePopup;","export default __webpack_public_path__ + \"static/media/succes.a9eb6caf.svg\";","export default __webpack_public_path__ + \"static/media/error.d0f413bf.svg\";","import succes from '../images/succes.svg'\r\nimport error from '../images/error.svg'\r\n\r\nfunction InfoTooltip (props){  \r\n      return(\r\n        <div className= {`popup popup_type_photo ${props.isOpen ? 'popup_is-opened' : ' '}`} onClick={props.onClose}>\r\n            <div className=\"popup__container\">\r\n            <img className=\"popup__registration-image\" src={props.isSuccesed? succes : error} alt={props.isSuccesed?'Успешно!':'Ошибка'}/>\r\n            <button className=\"popup__close\" onClick={props.onClose} type=\"button\"></button>\r\n            <h3 className=\"popup__title popup__registration-title\">{props.isSuccesed?'Вы успешно зарегестрировались!':'Что-то пошло не так! Попробуйте ещё раз.'}</h3>\r\n          </div>\r\n        </div>\r\n      )\r\n  }\r\n  \r\n  export default InfoTooltip","import React from 'react';\r\n\r\nfunction Login (props){\r\n\r\n    const [email, setEmail] =React.useState('')\r\n    const [password, setPassword] =React.useState('')\r\n\r\n    function handleChangeEmail(e) {\r\n        setEmail(e.target.value);\r\n      }\r\n  \r\n      function handleChangePassword(e) {\r\n        setPassword(e.target.value);\r\n      }\r\n\r\n    function signInSubmit(e){\r\n        e.preventDefault()\r\n        props.onSignIn(email, password)\r\n    }\r\n\r\n    return(\r\n        <form className='sign' onSubmit={signInSubmit}>\r\n            <h1 className = \"sign__title\">Вход</h1>\r\n            <input className = \"sign__input\" type = \"email\" value={email} onChange={handleChangeEmail} name=\"emailInput\" id=\"email_input\" placeholder='email' required />\r\n            \r\n            <input className = \"sign__input\" type = \"password\" value={password} onChange={handleChangePassword} name=\"passwordInput\"  placeholder='Пароль' id=\"password_input\" minLength=\"2\" maxLength=\"20\" required />\r\n          \r\n            <button className = \"sign__button link\"  type = \"submit\">Войти</button> \r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Login","export default __webpack_public_path__ + \"static/media/spinner1.488c33d2.png\";","import spinner from '../images/spinner1.png'\r\n\r\nfunction Spinner (){  \r\n      return(\r\n        <div className = 'popup popup_type_photo  popup_is-opened' >\r\n            <div className=\"popup__container\">\r\n            <img className=\"popup__registration-image rotation\" src={spinner} alt='Загрузка'/>\r\n            <h3 className=\"popup__title popup__registration-title\">Загрузка</h3>\r\n          </div>\r\n        </div>\r\n      )\r\n  }\r\n  \r\n  export default Spinner","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({component:Component, ...props}) =>{\r\n  return (\r\n    <Route>{props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" /> }</Route>\r\n)};\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport Header from './Header'\r\nimport Main from './Main'\r\nimport Footer from './Footer'\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport ImagePopup from './ImagePopup';\r\nimport {api} from '../utils/api';\r\nimport signApi from '../utils/auth'\r\nimport Register from './Register';\r\nimport { Route, Switch, Redirect, useHistory} from 'react-router-dom';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport { UserContext } from '../contexts/CurrentUserContext';\r\nimport AddPlacePopup from './AddPlacePopup'\r\nimport InfoTooltip from './InfoTooltip'\r\nimport Login from './Login'\r\nimport Spinner from './Spinner';\r\nimport ProtectedRoute from './ProtectedRoute';\r\n\r\n\r\nfunction App() {\r\n  \r\n  const [isEditProfilePopupOpen, setEditProfile] = React.useState(false); //Учел замечание про нейминг функций, в дальнешем исправлю, просто это очень долго ;)\r\n  const [isAddPlacePopupOpen, setAddPlacePopup] = React.useState(false); \r\n  const [isEditAvatarPopupOpen, setAvatarPopup] = React.useState(false);\r\n  const [isImagePopupOpen, setImagePopup] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState(null);\r\n  const [currentUser, setUser] = React.useState({name:'', about: ''})\r\n  const [initialCards, setCards] = React.useState(null);\r\n  const [loggedIn, setLogIn] = React.useState(false);\r\n  const [isRegistrationPopupOpen, setRegistrationPopup] = React.useState(false);\r\n  const [signSuccsess, setSignSucces] = React.useState(true);\r\n  const [email, setEmail] = React.useState('');\r\n  const [isLoading, setIsLoading] = React.useState(true);\r\n\r\n  const history = useHistory();\r\n\r\n  React.useEffect(()=>{\r\n    const jwt = localStorage.getItem('jwt')\r\n\r\n    loadData();\r\n\r\n    if(!jwt){\r\n      setIsLoading(false)\r\n      return;\r\n    }\r\n\r\n    signApi.tokenCheck(jwt)\r\n    .then(res => {\r\n\r\n      setEmail(res.data.email)\r\n\r\n      setLogIn(true)\r\n\r\n      setIsLoading(false)\r\n    })\r\n    .catch(err =>{\r\n      console.log(`Ошибка проверки токена!:${err}`)\r\n    })\r\n\r\n  },[])\r\n  \r\n  React.useEffect(() => {\r\n    const closeByEscape = (e) => {\r\n      if (e.key === 'Escape') {\r\n        closeAllPopups();\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', closeByEscape)\r\n    \r\n    return () => document.removeEventListener('keydown', closeByEscape)\r\n  }, [])\r\n\r\n  function handleCardLike(card) {\r\n    // Снова проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some(like => like._id === currentUser._id);\r\n    \r\n    const method = isLiked ? 'DELETE' : 'PUT';\r\n\r\n    api.toggleLike(card._id, method)\r\n      .then((newCard) => {\r\n         setCards((state) => {\r\n           return state.map((c) => c._id === card._id ? newCard : c)\r\n         });\r\n      })\r\n      .catch(err => {\r\n        console.log(`Ошибка: ${err}`)\r\n      })\r\n  } \r\n\r\n\r\n  function handleLogOut(){\r\n    history.push('/sign-in');\r\n    setLogIn(false)\r\n\r\n    localStorage.removeItem('jwt')\r\n  }\r\n\r\n  function handleSignUpSubmit(email, password){\r\n    signApi.signUp(email, password)\r\n    .then(res => {\r\n\r\n      setSignSucces(true);\r\n      \r\n      \r\n      history.push('/sign-in')\r\n    })\r\n    .catch(err => {\r\n      setSignSucces(false)\r\n    })\r\n    .finally(() => {\r\n      setRegistrationPopup(true);\r\n    })\r\n  }\r\n\r\n\r\n  function loadData(){\r\n    api.getUserData()\r\n      .then(res =>{\r\n        setUser(res)\r\n      })\r\n      .catch(err => {\r\n        console.log(`Ошибка: ${err}`)\r\n      })\r\n\r\n      api.getInitialCards()\r\n      .then(res =>{\r\n        setCards(res)\r\n      })\r\n      .catch(err => {\r\n        console.log(`Ошибка: ${err}`)\r\n      })\r\n  }\r\n\r\n  function handleSignInSubmit(email, password){\r\n    \r\n    signApi.signIn(email, password)\r\n    .then(res => {\r\n      setLogIn(true);\r\n\r\n      setEmail(email);\r\n\r\n      localStorage.setItem('jwt', res.token);\r\n\r\n      history.push('/');\r\n    })\r\n    .catch(err => {\r\n      setSignSucces(false);\r\n      setRegistrationPopup(true);\r\n    })\r\n    \r\n  }\r\n\r\n\r\n  function handleCardClick(card){\r\n    setSelectedCard(card);\r\n    toggleImagePopup();\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id)\r\n      .then(() => {\r\n         setCards((state) => {\r\n           return state.filter((c) => c._id !== card._id )//вставляем обновленную карточку\r\n         });\r\n    })\r\n      .catch(err => {\r\n        console.log(`Ошибка: ${err}`)\r\n      })\r\n  } \r\n\r\n\r\n  function toggleAddPlace(){\r\n    setAddPlacePopup(true);\r\n  }\r\n\r\n  function toggleEditAvatar(){\r\n    setAvatarPopup(true);\r\n  }\r\n\r\n  function toggleEditProfile(){\r\n    setEditProfile(true);\r\n  }\r\n\r\n  function toggleImagePopup(){\r\n    setImagePopup(true);\r\n  }\r\n\r\n  function closeAllPopups(){\r\n    setImagePopup(false);\r\n    setAddPlacePopup(false);\r\n    setAvatarPopup(false);\r\n    setEditProfile(false);\r\n    setSelectedCard(null);\r\n    setRegistrationPopup(false)\r\n  }\r\n  \r\n  function handleUpdateUser(name, about){\r\n    api.sendUserData(name, about)\r\n      .then((res) =>{\r\n        setUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => {\r\n        console.log(`Ошибка: ${err}`)\r\n      })\r\n  }\r\n\r\n  function handleUpdateAvatar(link){\r\n    api.sendUserAvatar(link)\r\n      .then((res) =>{\r\n        setUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => {\r\n        console.log(`Ошибка: ${err}`)\r\n      })\r\n  }\r\n\r\n  function handleAddCard(name, link){\r\n    api.sendCardInfo(name, link)\r\n      .then((newCard) =>{\r\n        setCards([newCard, ...initialCards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => {\r\n        console.log(`Ошибка: ${err}`)\r\n      })\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n    <UserContext.Provider value={currentUser}>\r\n    {!isLoading ? <>\r\n    <Switch>\r\n      <ProtectedRoute \r\n          exact path='/'\r\n          component={Main}  \r\n          loggedIn = {loggedIn}  \r\n          handleCardClick={handleCardClick} \r\n          onEditProfile={toggleEditProfile} \r\n          onAddPlace={toggleAddPlace} \r\n          onEditAvatar={toggleEditAvatar}\r\n          cards={initialCards}\r\n          email={email}\r\n          onLogOut={handleLogOut}\r\n          onCardDelete={handleCardDelete}\r\n          onCardLike={handleCardLike}/>  \r\n      <Route path='/sign-up'>\r\n        <Header email={email} onLogOut={handleLogOut}/>\r\n        <Register onSignUp = {handleSignUpSubmit}/>\r\n      </Route>\r\n      <Route path='/sign-in' >\r\n         <Header email={email} onLogOut={handleLogOut}/>\r\n         <Login onSignIn = {handleSignInSubmit}/>  \r\n      </Route>\r\n      <Route>\r\n          {!loggedIn ? (<Redirect to=\"/\" />) : (<Redirect to=\"/sign-in\" />)}\r\n      </Route>\r\n    </Switch></>:<Spinner />}\r\n    <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>  \r\n    </UserContext.Provider>\r\n    <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\r\n    <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddCard={handleAddCard}/>\r\n    <PopupWithForm name=\"delete\" title=\"Вы уверены?\" onClose={closeAllPopups}>\r\n          <button className = \"popup__save-button\" type = \"submit\">Да</button>\r\n        </PopupWithForm>    \r\n    <ImagePopup onClose={closeAllPopups} isOpen={isImagePopupOpen} selectedCard={selectedCard}/>\r\n    <InfoTooltip onClose={closeAllPopups} isSuccesed={signSuccsess} isOpen={isRegistrationPopupOpen}/>\r\n    <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { HashRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter> \r\n      <App />\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}